<html>
<head>

<title>Fitch-style Proof Helper</title>

<link rel="stylesheet" type="text/css" href="./css.css" />

</head>
<body>

<div id="elm"><span></span></div>

<script src="./main.js" charset="utf-8"></script>
<script src="./input-fix.js"></script>

<script>

const app = Elm.Main.init({
  node: document.getElementById('elm').firstChild,
  flags: getUrlArg(),
});

function getUrlArg() {
  const url = window.location.href
  const key = '?proof=';
  const idx = url.indexOf(key)
  const encoded = idx === -1 ? "" : url.slice(idx + key.length);
  const decoded = decodeURI(encoded);
  console.log("Url argument:", decoded);
  return decoded;
}

app.ports.setUrlArg.subscribe(arg => {
  window.history.replaceState(null, '', window.location.pathname + "?proof=" + encodeURI(arg));
});

app.ports.copyToClipboard.subscribe(text => {
  navigator.clipboard.writeText(text);
});

</script>

</body>
</html>
